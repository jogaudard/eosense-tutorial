{
  "hash": "8f5955e93f7eefc03d49e14ae421f771",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Comparison with eosAC-T/O\"\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n\nfluxes_eos_read <- read_csv(\"compare_data/chamber_data.csv\")\n\nfluxes_eos <- fluxes_eos_read |>\n    mutate(\n        date = as.Date(`Julian Day`, origin = as.Date(\"2024-01-01\")),\n        seconds = (`Julian Day` - floor(`Julian Day`)) * 24 * 3600,\n        time = hms::as_hms(seconds),\n        datetime = as_datetime(paste(date, time))\n    ) |>\n    select(datetime, everything())\n\n# View(fluxes_eos)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nfluxible_df <- readRDS(\"compare_data/fluxible_df.rds\")\n\nfluxes_eos_id <- fluxes_eos |>\n  # filter(\n  #   datetime > ymd_hms(\"2024-12-12 00:00:01\")\n  # ) |>\n  arrange(datetime) |>\n  rowid_to_column(\"id\")\n\nfluxible_df_id <- fluxible_df |>\n  # filter(\n  #   f_datetime > ymd_hms(\"2024-12-12 00:03:01\")\n  # ) |>\n  arrange(f_datetime) |>\n  rowid_to_column(\"id\")\n\ncomparison_fluxes <- left_join(fluxible_df_id, fluxes_eos_id, by = \"id\") |>\n  rename(\n    eos_flux = `Flux CO2 (L) (umol/m^2/s)`,\n    eos_slope = `f (Linear Slope)`\n  )\n\ncomparison_fluxes2 <- full_join(fluxible_df, fluxes_eos, by = join_by(\"f_datetime\" == \"datetime\")) |>\n  rename(\n    eos_flux = `Flux CO2 (L) (umol/m^2/s)`\n  ) |>\n  select(f_datetime, fluxible_flux, eos_flux) |>\n  pivot_longer(!f_datetime, names_to = \"method\", values_to = \"flux\") |>\n  drop_na(flux) |>\n  arrange(f_datetime)\n\ncomparison_fluxes3 <- full_join(fluxible_df, fluxes_eos, by = join_by(\"f_datetime\" == \"datetime\")) |>\n  rename(\n    eos_slope = `f (Linear Slope)`\n  ) |>\n  select(f_datetime, fluxible_slope, eos_slope) |>\n  # pivot_longer(!f_datetime, names_to = \"method\", values_to = \"slope\") |>\n  # drop_na(slope) |>\n  arrange(f_datetime)\n\n# View(comparison_fluxes3)\n\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Comparing the slopes because I am quite sure I have the wrong area, volume and temperature.](comparison_files/figure-html/fig-slopes-compare-1.png){#fig-slopes-compare width=960}\n:::\n:::\n\n\n\n\n<!-- A bit more exploration, seeing if there is a mismatch of the measurements due to wrong pairing between the two datasets. -->\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\nThere are fluxes in the EOsense dataset that were not produced by fluxible.\nWe identify them and remove them before pairing.\n<!-- Re pairing the two dataset while getting rid of those measurements that appear in one dataset and not in the other. -->\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n\nfluxible_df <- readRDS(\"compare_data/fluxible_df.rds\")\n\nfluxes_eos_id <- fluxes_eos |>\n  arrange(datetime) |>\n  rowid_to_column(\"eos_id\") |>\n  filter(\n    !(eos_id %in% c(12, 22, 52)) # those are \"in between\" fluxes in the fluxible dataset\n  ) |>\n  rowid_to_column(\"id\")\n\nfluxible_df_id <- fluxible_df |>\n  arrange(f_datetime) |>\n  rowid_to_column(\"id\")\n\ncomparison_fluxes4 <- left_join(fluxible_df_id, fluxes_eos_id, by = \"id\") |>\n  rename(\n    eos_flux = `Flux CO2 (L) (umol/m^2/s)`,\n    eos_slope = `f (Linear Slope)`\n  )\n\n# View(comparison_fluxes4)\n```\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Comparing the linear slopes because I am quite sure I have the wrong area, volume and temperature so fluxes are off. x-axis is slopes processed with fluxible and y-axis is corresponding EOsense control data, lable are fluxid produced by fluxible.](comparison_files/figure-html/fig-slopes-compare2-1.png){#fig-slopes-compare2 width=960}\n:::\n:::\n",
    "supporting": [
      "comparison_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}